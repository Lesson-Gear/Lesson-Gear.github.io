<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Random Name Picker</title>
    <link rel="stylesheet" href="rperson_css.css">

</head>
<body>

    <div class="button-container">
        <div class = "button-text-container">
            <div class="button-area">
                <button onclick="downloadNamesFile()">Download</button>
                <button onclick="loadFile()"id="uploadBtn">upload</button> 
                <input type="file" id="fileUpload" accept=".txt" style="display: none">
            </div>
            <div class="text-aarea">
                So that you don't have to enter the names manually each time, you can download a text file where the names are stored. To do this, enter the names in the name field and then click the download button. Subsequently, the file will be automatically downloaded. You can move this file from your download folder as desired. When using the Random Group Generator again, you can click the upload button and select the file with the names.
            </div>
        </div>
    </div>

    <div class="container">
        <header>
            <h1>Random Name Picker</h1>
        </header>

        <div class="content">

            <div class="left">
                <textarea class="large-textarea" id="names" placeholder="Please enter the names separated by commas." onkeyup="checkEnter(event)"></textarea>

                <div class="inputs" id="inputContainer">  <!-- mistake -->
                    <input type="number" min="1" id="count" placeholder="Number of people who should be chosen">
                    
                </div>

            </div>

            <div class="right">
                <div id="result" class="text-area">
                    <!-- Platz fÃ¼r Text -->
                    
                </div>
            </div>

        </div>

    </div>





    <script>
        function checkEnter(event) {
            if (event.key === "Enter") {
                pickRandomNames();
            }
        }

        function pickRandomNames() {
            const namesInput = document.getElementById("names");
            const countInput = document.getElementById("count");
            const resultDiv = document.getElementById("result");

            const names = namesInput.value.split(',').map(name => name.trim());
            const count = parseInt(countInput.value);

            if (names.length === 0 || isNaN(count) || count < 1) {
                resultDiv.textContent = "Please enter names and a valid count.";
                return;
            }

            if (count > names.length) {
                resultDiv.textContent = "Count exceeds the number of names available.";
                return;
            }

            const randomNames = [];
            while (randomNames.length < count) {
                const randomIndex = Math.floor(Math.random() * names.length);
                const randomName = names.splice(randomIndex, 1)[0];
                randomNames.push(randomName);
            }

            // Make "Randomly Chosen Names" text bold
            resultDiv.innerHTML = `<strong>Randomly Chosen Names:</strong> ${randomNames.join(", ")}`;
        }



        function downloadNamesFile() {
            const namesInput = document.getElementById("names");
            const names = namesInput.value;
            const blob = new Blob([names], { type: "text/plain" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "names.txt";
            a.click();
            URL.revokeObjectURL(url);
        }

        document.getElementById('uploadBtn').addEventListener('click', function() {
            document.getElementById('fileUpload').click();
        });

        document.getElementById('fileUpload').addEventListener('change', function(event) {
            const fileInput = document.getElementById("fileUpload");
            const namesInput = document.getElementById("names");

            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const fileContent = e.target.result;
                    namesInput.value = fileContent;
                };
                reader.readAsText(file);
            }
        });


        // Event listener for the Enter key
        document.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                pickRandomNames();
            }
        });

    </script>
</body>
</html>
